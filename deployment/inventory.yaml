all:
  children:
    k8s_clusters:
      vars:
        ansible_connection: local
      hosts:
        ratom-staging:
          env_name: staging
          k8s_kube_context: microk8s
          k8s_domain_names:
          - ratom-staging.caktus-built.com
          k8s_namespace: "ratom-{{ env_name }}"
          k8s_container_name: api
          k8s_container_image: govsanc/ratom-server
          k8s_container_image_tag: latest
          k8s_container_port: 8000
          k8s_container_ingress_paths:
          - /admin
          - /graphql
          - /django-static
          vault_database_password: !vault |
            $ANSIBLE_VAULT;1.1;AES256
            65303939623134346636643063633930383235303962366432613536633238383563616532356432
            6163663135643863653433383366343061303265306261650a666636356531663861333037656438
            37306434396263393534396232653933306565356131336561363632363033663337356237386536
            3135363830623962660a306132306463626165363365346135363233373237643539303433363339
            61346465646135653634363538646264626539343163366265343638616665353839643239663330
            6462353564393236376561613562336639386334653731353936
          vault_secret_key: !vault |
            $ANSIBLE_VAULT;1.1;AES256
            31373665616137303062326664346339646537626135323733353233363661303133653564636334
            3964353236633036363936656335353839616364643731650a633430643337616164656430363932
            37333466336333323532303266616365313734616634336537653266356561323064303737373335
            3265366664396531640a376661336566373330393137643463323139323937363931373964656262
            34653034386461333837643232663137393363363966396638363265653936386165336330623865
            34366631313665366165323639303730373837616239386637353335373532623463343365363561
            626161363966383236373563393561316238
          vault_elasticsearch_url: !vault |
            $ANSIBLE_VAULT;1.1;AES256
            33616461636432303662653463333239303863636535336364666535373864346664343039313637
            6361653430653934316464326439386163393835376137620a393630366331373430386565663463
            61333964303530663138636361653339653138306634646565393164666666336335396234333132
            3438386435353863380a613765303364663736376666356433383363366430366130326365623161
            62313237326634653432656166663935343837613766346639313866376262396431623566346464
            36623762613664383230626131353364663633383932356531363163396138356238323064303337
            37373238303165356261363137333239313130343861393939653231383530656235316462336632
            30613237373661366266323261646232356539623165313635303834653236343866393236366639
            38303633343931663365373065333638663138313432386163646338646164393535
          k8s_environment_variables:
            DJANGO_SECRET_KEY: "{{ vault_secret_key }}"
            ENVIRONMENT: "{{ env_name }}"
            DATABASE_URL: "postgres://ratom_dev:{{ vault_database_password }}@rd24g7omgn9jon.cmrs9qsyjjbd.us-east-1.rds.amazonaws.com:5432/ratom_dev"
            CACHE_HOST: memcached:11211
            DOMAIN: "{{ k8s_domain_names[0] }}"
            SENTRY_DSN: https://a0ca0bdd3f3d4d66b0bb7baaaa322a81@sentry.caktus-built.com/18
            ELASTICSEARCH_URL: "{{ vault_elasticsearch_url }}"
